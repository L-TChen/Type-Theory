\input{preambles/note}
\input{preambles/basic}
\title{Lambda Calculus and Types: Exam}
\begin{document}
\maketitle
\begin{enumerate}
  \item ($20\%$)
    Let $x, y, z, a, b, c, m, n, f, v$ be variables.  Find all free and bound
    variables in the following
    $\lambda$-terms.
    \begin{enumerate}
      \item $M_1 \defeq \lambda x\;y.\, z$
      \item $M_2 \defeq (\lambda z\,v.\, v\;z)\;v$
      \item $M_3 \defeq (\lambda x\;y\;z.\,x)\;a\;y\;c$
      \item $M_4 \defeq x\;(\lambda x.\, x\;y)\;(\lambda y.\, y)$ 
      \item $M_5 \defeq \lambda n.\,n\;(\lambda v.\, \bc_0)\;\bc_1$
    \end{enumerate}
    where $\bc_0 = \lambda f\,x.\,x$ and $\bc_1 = \lambda f\,x.\,f\,x$.
  \item ($20\%$) Reduce the following terms to its normal form (if any) using
    the leftmost-innermost strategy and the leftmost-outermost
    strategy respectively.
    \begin{enumerate}
      \item $(\lambda n.\,n\;(\lambda v.\, \bc_0)\;\bc_1)\;\bc_2$
      \item $(\lambda x\,y.\, x)\;((\lambda z\,v.\, v\;z) \;v)\;((\lambda x.\,
        x\;x)\;(\lambda x.\, x\;x))$
    \end{enumerate}
  \item ($25\%$ + $15\%$) In simply typed lambda calculus, the product
    type is defined as
    \[
      \sigma \times_\rho \tau \defeq (\sigma \to \tau \to \rho) \to \rho
    \]
    for arbitrary~$\rho$. 
    \begin{enumerate}
      \item Given $\Gamma \vdash M_1 : \sigma$ and $\Gamma \vdash M_2 :
        \tau$, define an untyped $\lambda$-term~$M$ such that
        \[
          \Gamma \vdash M : \sigma \times_\rho \tau
        \]
        is derivable for any $\rho$. Justify your answer.

        \emph{Hint}. To derive the type of~$M$, you may need Weakening Lemma
        which says that for any judgement $\Gamma \vdash M : \sigma$, the
        judgement $\Gamma, x : \tau \vdash M : \sigma$ is derivable for any $x
        \not\in \Gamma$.
    \item Define untyped $\lambda$-terms $N_1$ and $N_2$
      with $N_1 \reduce M_1$, $N_2 \reduce M_2$ and that
        \begin{multicols}{2}
          \begin{prooftree}
            \AXC{$\Gamma \vdash M : \sigma \times_\rho \tau$}
            \UIC{$\vdots$}
            \UIC{$\Gamma \vdash N_1 : \sigma$}
          \end{prooftree}
          \begin{prooftree}
            \AXC{$\Gamma \vdash M : \sigma \times_\rho \tau$}
            \UIC{$\vdots$}
            \UIC{$\Gamma \vdash N_2 : \tau$}
          \end{prooftree}
        \end{multicols}
        for some suitable type(s) $\rho$ respectively.
    \end{enumerate}
    \paragraph{Bonus} You will get an extra credit~($15\%$) if you give your
    answer in polymorphic lambda calculus (System F) instead where
    $\sigma\times\tau \defeq \forall t.\,(\sigma \to \tau \to t) \to t$.
  \item ($35\%$) Is Y-combinator $\mathbf{Y} = \lambda f.\, (\lambda x.\,
    f\,(x\,x))\,(\lambda x.\,f\,(x\,x))$ typable in simply typed lambda calculus
    \emph{\`a la} Curry? That is, are there a context~$\Gamma$ and a
    type~$\sigma$ such that
    \[
      \Gamma \vdash \mathbf{Y} : \sigma.
    \]
    Justify your answer.
\end{enumerate}\end{document}
